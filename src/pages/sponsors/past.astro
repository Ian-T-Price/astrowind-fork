---
import Layout from '~/layouts/PageLayout.astro';
import Features from '~/components/widgets/Features.astro';
import sponsors from '~/data/pastSponsors.json';

const metadata = {
  title: 'Dundonald Farmers Society 2025 Open Show',
  ignoreTitleTemplate: true,
};

// Group sponsors alphabetically
const sponsorGroups: { label: string; items: typeof sponsors }[] = [
  { label: 'A – I', items: [] },
  { label: 'J – R', items: [] },
  { label: 'S – Z', items: [] },
];

for (const sponsor of sponsors) {
  const firstLetter = sponsor.title.charAt(0).toUpperCase();

  if (firstLetter >= 'A' && firstLetter <= 'I') {
    sponsorGroups[0].items.push(sponsor);
  } else if (firstLetter >= 'J' && firstLetter <= 'R') {
    sponsorGroups[1].items.push(sponsor);
  } else if (firstLetter >= 'S' && firstLetter <= 'Z') {
    sponsorGroups[2].items.push(sponsor);
  }
}
---

<Layout metadata={metadata}>
  <Features
    id="headline"
    tagline="Previous Sponsors"
    title="Supporters of the Show"
    subtitle="DUNDONALD FARMERS' SOCIETY greatly appreciate the donations and support given by the following:-"
  />
  {
    sponsorGroups.map(
      (group) =>
        group.items.length > 0 && (
          <>
            {/* <h2 class="text-2xl font-bold mb-4">{group.label}</h2> */}
            <Features
              id={group.label.toLowerCase().replace(/\W/g, '')}
              tagline="Previous Sponsors"
              title={`Sponsors: ${group.label}`}
              subtitle=""
              items={group.items}
            />
          </>
        )
    )
  }

  <Fragment slot="bg">
    <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
  </Fragment>
</Layout>

<!-- ---
import Layout from '~/layouts/PageLayout.astro';
import sponsors from '~/data/pastSponsors.json';

const metadata = {
  title: 'Dundonald Farmers Society 2025 Open Show',
  ignoreTitleTemplate: true,
};

// Group sponsors alphabetically
const sponsorGroups: { label: string; items: typeof sponsors }[] = [
  { label: 'A–I', items: [] },
  { label: 'J–R', items: [] },
  { label: 'S–Z', items: [] },
];

for (const sponsor of sponsors) {
  const firstLetter = sponsor.title.charAt(0).toUpperCase();
  if (firstLetter >= 'A' && firstLetter <= 'I') {
    sponsorGroups[0].items.push(sponsor);
  } else if (firstLetter >= 'J' && firstLetter <= 'R') {
    sponsorGroups[1].items.push(sponsor);
  } else if (firstLetter >= 'S' && firstLetter <= 'Z') {
    sponsorGroups[2].items.push(sponsor);
  }
}
---

<Layout metadata={metadata}>
  <div class="space-y-12">
    {sponsorGroups.map(group => (
      group.items.length > 0 && (
<section class="relative">
  <h2 class="sticky top-0 bg-white dark:bg-gray-900 z-10 p-4 text-2xl font-bold shadow-md">
    Sponsors {group.label}
  </h2>
  <ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 p-4">
    {group.items.map(sponsor => (
      <li class="p-4 border rounded-lg shadow-sm bg-white dark:bg-gray-800">
        {sponsor.title}
      </li>
    ))}
  </ul>
  <div class="h-32"></div> <!-- extra spacer so sticky is noticeable --
</section>
      )
    ))}
  </div>

  <Fragment slot="bg">
    <div class="absolute inset-0 bg-blue-50 dark:bg-transparent" />
  </Fragment>
</Layout> -->

<!-- ---
import Layout from '~/layouts/PageLayout.astro';
import Features from '~/components/widgets/Features.astro';
import sponsors from '~/data/pastSponsors.json';

const metadata = {
  title: 'Dundonald Farmers Society 2025 Open Show',
  ignoreTitleTemplate: true,
};

// Chunk the sponsors into groups of 20
const chunkSize = 20;
const sponsorGroups: { title: string; description: string; icon: string; }[][] = [];


for (let i = 0; i < sponsors.length; i += chunkSize) {
  sponsorGroups.push(sponsors.slice(i, i + chunkSize));
}
---
<Layout metadata={metadata}>

  <Features
  id="headline"
  tagline="Previous Sponsors"
  title="Previous Sponsors"
  subtitle="DUNDONALD FARMERS' SOCIETY greatly appreciate the donations and support given by the following:-"
/>

  {sponsorGroups.map((group, index) => (
    <section class="mb-12">
      <Features
        id={`sponsors-group-${index}`}
        title={`Sponsors Group ${index + 1}`}
        items={group}
      />
    </section>
  ))}

  <Fragment slot="bg">
    <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
  </Fragment>
</Layout> -->
